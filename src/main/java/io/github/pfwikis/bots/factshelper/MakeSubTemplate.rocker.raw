@import io.github.pfwikis.bots.facts.model.SConcept
@import io.github.pfwikis.bots.facts.util.ConceptUtil

@args(SConcept parent, SConcept c)
<noinclude>
{{Bot created|Bot Facts Helper}}
{{#template_params:
	@for((i,prop):c.getProperties()) {
		@if(!i.first()){|}@prop.getName() (property=@prop.getName())
	}
}}
[[Category:Facts templates]]
</noinclude><includeonly><!--


Only show the properties on the /Sections subpage
-->{{#ifeq:{{SUBPAGENAME}}|@c.getPluralName()|
{{#ifeq:{{#counter: i}}|1
|<div class="facts-display-header">
  <div class="facts-display-header-item">[[Facts:{{BASEPAGENAME}}|General @parent.getName() Facts]]</div>
  @for(sub:parent.getSubForms()) {
  <div class="facts-display-header-item">{{#ifeq:{{PAGENAME}}|{{BASEPAGENAME}}/@sub.getPluralName()|@sub.getPluralName()|{{#formredlink:target=Facts:{{BASEPAGENAME}}/@sub.getPluralName()|form=@parent.getName()/@sub.getName()|link text=Create @sub.getPluralName()|existing page link text=@sub.getPluralName()}}}}</div>
  }
</div>
}}
<div class="facts-display facts-display-@parent.toCSSName()-@c.toCSSName()">
@for(prop:c.getProperties()) {
@DisplayTemplateField.template(prop.getName(), prop.getFactType().displayFactCode(prop.getName())) -> {
@prop.getFactType().displayFactCode(prop.getName())
}
}
</div>[[Category:Facts about @parent.getName() @c.getPluralName()]]
}}<!--




Only store the properties if this template is transcluded into a root page.
-->{{#ifeq:{{SUBPAGENAME}}|@c.getPluralName()||
{{#subobject:
|Fact type=Template:Facts/@parent.getName()/@c.getName()
@for(prop:c.getProperties()) {@prop.getFactType().storeSubFactCode(prop.getName())}
|@@sortkey={{#counter: @c.getName()-counter | pad length=3 }}
}}<!--

Copy some fields to parent
-->@for(prop:c.getProperties()) {@prop.getFactType().subFormAtEnd(prop)}
}}
</includeonly>